1. 계층 구조 (Hierarchy)
데이터는 크게 [상태] > [노드 그룹] > [개별 대화 노드] 순으로 구성됩니다.
상태 (State): 플레이어의 현재 진행 상황을 결정하는 최상위 키입니다 (예: ST_IDLE, ST_PHOTO_NEED).
노드 (Nodes): 해당 상태에서 발생할 수 있는 모든 대화 뭉치입니다.
개별 노드 (ID): 머메이드 다이어그램에서 정의한 DH_IDLE_1 같은 고유 아이디입니다.

2. 노드 내부 필드 설명
필드명,역할,설명
Speaker,화자 구분,Player 또는 Grandpa로 설정하여 UI 레이아웃을 결정합니다.
Text,대사 내용,화면에 출력될 실제 텍스트입니다.
Next,다음 연결,다음에 이어질 노드의 ID입니다. nil이면 대화가 종료됩니다.
Choices,선택지 분기,유저의 입력을 받는 배열입니다. 각 선택지는 다시 Next를 가집니다.
SetState,상태 변이,대화 종료 후 플레이어의 상태를 강제로 바꿀 때 사용합니다.
Action,외부 트리거,사진 촬영 가이드 열기 등 게임 내 특정 함수를 호출할 때 씁니다.

3. 작동 원리 (Workflow)
이 데이터 구조가 실제 게임에서 돌아가는 방식은 다음과 같습니다.
상태 매칭: NPC와 상호작용 시, 시스템이 NPC의 CurrentState를 확인하여 테이블에서 해당 섹션(예: ST_IDLE)을 찾습니다.
시작 노드 실행: 각 섹션의 첫 번째 노드부터 순차적으로 Next를 따라 대화를 진행합니다.
분기 처리: Choices가 있다면 시스템은 대화를 멈추고 유저의 클릭을 기다립니다. 유저가 클릭한 항목의 Next ID로 점프합니다.
상태 업데이트: SetState 필드를 만나면, 대화 종료 시 NPC의 데이터베이스(DataStore)에 있는 상태 값을 업데이트하여 다음 대화 시 새로운 섹션이 나오게 합니다.
